<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Primary Meta Tags -->
	<title>How upload firmware - WiFi thermostat - ESP8266 / ESP32</title>
	<meta name="description" content="Instructions for startup and upload firmware for WiFi thermostat project for WiFi platform ESP8266 and ESP32">
	<meta name="keywords" content="Thermostat, digital, arduino ide, wemos d1 mini, nodemcu, wifi, esp8266, heating, heating, webserver, socket, http, web, ip, ipv4, ds18b20, onewire, 1-wire">
	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://martinius96.github.io/WiFi-termostat/en/spustenie.html">
	<meta property="og:title" content="Project launch - WiFi thermostat - ESP8266 / ESP32">
	<meta property="og:description" content="Instructions for installation and launch of the WiFi thermostat project built on the WiFi platform ESP8266 and ESP32">
	<meta property="og:image" content="">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://martinius96.github.io/WiFi-termostat/en/spustenie.html">
	<meta property="twitter:title" content="Project launch - WiFi thermostat - ESP8266 / ESP32">
	<meta property="twitter:description" content="Instructions for installation and launch of the WiFi thermostat project built on the WiFi platform ESP8266 and ESP32">
	<meta property="twitter:image" content="">
	
	<link rel="icon" type="image/png" href="favicon.png">
	<link rel="sitemap" type="application/xml" title="Sitemap" href="../../sitemap.xml" />
	<meta name="google-site-verification" content="UwZZh2EXv3iWUAi_1Z0hLxVCz6ySJ4UdY_BPoLtejwo" />    	
	<meta property='fb:admins' content='100001242570317'>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript">
    		window.smartlook||(function(d) {
    			var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
    			var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
    			c.charset='utf-8';c.src='https://rec.smartlook.com/recorder.js';h.appendChild(c);
    		})(document);
    		smartlook('init', 'db50efe9fff280a17db52b82be221240cbbd3dbe');
	</script>  
	<style>
		table, th, td {
  			border: 1px solid black;
		}
	</style>
	<style>
	#right {
  position: absolute;
  right: 0px;
}
	</style>
</head>
<body>
	<div class="container">
  		<div class="row">
    			<div class="col-sm-12">
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="index.html">WiFi thermostat</a>
    </div>
    <ul class="nav navbar-nav">
      	<li class=""><a href="index.html">Overview</a></li>
	<li><a href="zapojenie.html">Involvement</a></li>      
	<li class="active"><a href="spustenie.html">Firmware</a></li>
  <li><a href="json_client.html">JSON client</a></li>
      	<li><a href="kontakt.html">Contact</a></li>
<a href="../de/spustenie.html"><img src="https://futbalovysen.sk/wp-content/uploads/germany.png" alt="Germany.png, 2,2kB" title="Germany" height="32" width="32"></a>		 
   <a href="../spustenie.html"><img src="https://futbalovysen.sk/wp-content/uploads/slovakia.png" alt="Slovak flag.png, 2,2kB" title="Slovakia" height="32" width="32"></a>
<li style="float: right; "><a href="https://martinius96.github.io/termostat-ethernet/en/" class="btn btn-danger" role="button" title="Zmeniť projekt na Ethernet termostat"><img src="https://i.imgur.com/6dW9TvK.png" width=16px height=16px> <font color="white">Ethernet thermostat</font></a></li>  </ul> 
</div>
</nav>  
				<div class="alert alert-success">
					<strong>WiFi thermostat project at Github: </strong><a href="https://github.com/martinius96/WiFi-termostat">WiFi thermostat</a>
				</div>	
<div class="alert alert-danger">
 	<strong>Support the WiFi thermostat project via PayPal. Support will allow you to add new features in the future and open the source code of the application: </strong><a href="https://www.paypal.com/paypalme/chlebovec" class="btn btn-primary" role="button">PayPal donate</a>
</div>	
<span class="label label-default">ESP8266</span>
<span class="label label-primary">ESP32</span>
<span class="label label-success">WiFi</span>
<span class="label label-info">DS18B20</span>
<span class="label label-warning">OneWire</span>
<span class="label label-danger">Dallas</span>
<span class="label label-default">HTML</span>
<span class="label label-primary">Webserver</span>
<span class="label label-success">WebSocket</span>
<span class="label label-info">JSON</span>
<span class="label label-warning">mDNS</span>	
<span class="label label-danger">UART</span>				
<section>
  <h2>Launch of the WiFi Thermostat Project - ESP8266 / ESP32</h2>
  
  <p style="text-align: justify;">
    The WiFi thermostat project is available in multiple versions, which can be accessed through the official GitHub repository. Each version offers different functionalities, primarily concerning advanced usage options and the ability to update firmware remotely.
  </p>

  <p style="text-align: justify;">
    The firmware is provided in a compiled binary form, which is pre-tested and ready for use with the target platform. This universal firmware ensures consistent functionality across various microcontrollers that are compatible with the program.
  </p>
  
  <div class="alert alert-danger">
    <strong>Note:</strong> The free version is available only as a compiled binary program, without access to the source code in .ino format.
  </div>
</section>

<hr><center><h2>Firmware distribution based on supported WiFi platforms</h2></center><hr>
<li><b>ESP8266</b> - target platform with ESP8266 chip in versions 12E to 12F (conditioned by flash DIO method)</li>
<li><b>ESP32</b> - target platform with ESP-32S chip (AI-Thinker), ESP32-WROOM-32 (Espressif Systems)</li>
<hr><center><h2>Firmware distribution by function</h2></center><hr>
<div class="alert alert-info">
 	<strong> Available firmware (.bin) for ESP8266 and ESP32 microcontrollers.</strong> Firmware upload is done via esptool - part of the downloaded .zip firmware archive.
</div>	
			<center>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>
<tr>
<th>Firmware name</th>
<th>Firmware features</th>
<th>ESP8266</th>
<th>ESP32</th>
</tr>
</thead>
<tbody>
<tr>
<td><b>WiFi_TERMOSTAT</font></b></td>
<td>Thermostat with the possibility of setting the target temperature and hysteresis via a web interface, controlled automatically</td>
<td><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2FWiFi-termostat%2Ftree%2Fmain%2Ffirmware%2FESP8266%2Fen%2FWiFi_THERMOSTAT" class="btn btn-success" role="button">ESP8266 EN firmware</a></td>
<td><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2FWiFi-termostat%2Ftree%2Fmain%2Ffirmware%2FESP32%2Fen%2FWiFi_THERMOSTAT" class="btn btn-danger" role="button">ESP32 EN firmware</a></td>
</tr>
<tr>
<td><b>WiFi_TERMOSTAT_mDNS</b></td>
<td>Thermostat with the possibility of setting the target temperature and hysteresis via a web interface, controlled automatically. Possibility to use a domain name within the LAN network (mDNS record) for connection with thermostat</td>
<td><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2FWiFi-termostat%2Ftree%2Fmain%2Ffirmware%2FESP8266%2Fen%2FWiFi_THERMOSTAT_mDNS" class="btn btn-success" role="button">ESP8266 EN firmware</a></td>
<td><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2FWiFi-termostat%2Ftree%2Fmain%2Ffirmware%2FESP32%2Fen%2FWiFi_Thermostat_mDNS" class="btn btn-danger" role="button">ESP32 EN firmware</a></td>
</tr>
<tr>
<td><b>WiFi_TERMOSTAT_MANUAL_experimental</b></td>
<td>Thermostat with the possibility of setting the target temperature and hysteresis via a web interface, controlled automatically. Experimental possibility of manual control of SW output by a button from a web server. Switching heating control modes automatic / manual.</td>
<td><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2FWiFi-termostat%2Ftree%2Fmain%2Ffirmware%2FESP8266%2FWiFi_TERMOSTAT_MANUAL_experimental" class="btn btn-success" role="button">ESP8266 SK firmware</a></td>
<td><a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fmartinius96%2FWiFi-termostat%2Ftree%2Fmain%2Ffirmware%2FESP32%2FWiFi_TERMOSTAT_MANUAL_experimental" class="btn btn-danger" role="button">ESP32 SK firmware</a></td>
</tr>
</tbody>
</table>
	</div></center>
<section>
  <h2>Uploading Firmware to the ESP Platform</h2>
  
  <p style="text-align: justify;">
    To upload the binary program to the ESP platform, the <code>ESPTOOL</code> tool must be used. This tool can be accessed through the Arduino IDE or the Espressif Systems' development framework, ESP-IDF, for uploading compiled programs.
  </p>

  <div class="alert alert-danger">
    <strong>Note:</strong> For the ESP32 platform, hold the BOOT button until the "Connecting ........_____....." message appears or use a pulldown on GPIO 0 if your development kit does not have a BOOT button.
  </div>

  <p style="text-align: justify;">
    An automated executable <code>.bat</code> script is included in each firmware folder. This script has the COM port set to <code>COM7</code> for ESP8266 and <code>COM17</code> for ESP32, automatically launching <code>ESPTOOL</code> to upload the firmware to the microcontroller.
  </p>
  
  <figure>
    <img src="https://i.imgur.com/M0U6HkC.png" alt="Device Manager - Windows - a registered ESP microcontroller" title="Device Manager - Windows - a registered ESP microcontroller" style="display: block; max-width: 100%; height: auto;">
    <figcaption>Device Manager showing a registered ESP microcontroller</figcaption>
  </figure>

  <p style="text-align: justify;">
    <strong style="color: red;">The destination COM port must be adjusted based on the COM port where your board/microcontroller is logged in.</strong> This can be found in the Peripherals and Drivers Manager on your computer.
  </p>

  <p style="text-align: justify;">
    The ESP8266 microcontroller on NodeMCU/Wemos D1 Mini development kits typically uses the CH340 USB-UART converter, which appears in the device manager under that name. The ESP32 often uses the CP2102 USB-UART converter from Silicon Labs, listed as the "CP210X USB UART Bridge."
  </p>

  <p style="text-align: justify;">
    The program implementation for the ESP8266 assumes the board already has the essential parts of the flash memory loaded, such as the partition table. The binary program provided is exclusively the thermostat application, with no additional bundled parts.
  </p>

  <p style="text-align: justify;">
    Once the firmware is loaded, <code>ESPTOOL</code> automatically shuts down and performs a software restart of the ESP platform, which boots the new firmware, preparing the WiFi thermostat for use.
  </p>

  <p style="text-align: justify;">
    For the ESP8266, the firmware is written to the standard offset <code>0x00000</code> (no partition table included). For ESP32, the partition table is written to offset <code>0x8000</code>, the bootloader to offset <code>0x1000</code>, and the firmware itself is written to <code>0x10000</code>.
  </p>

  <figure>
    <img src="https://i.imgur.com/Nz4Uryz.png" alt="ESPTOOL - a tool for uploading firmware to the ESP8266 / ESP32 microcontroller" title="ESPTOOL - a tool for uploading firmware to the ESP8266 / ESP32 microcontroller" style="display: block; max-width: 100%; height: auto;">
    <figcaption>ESPTOOL tool for uploading firmware to ESP8266/ESP32 microcontrollers</figcaption>
  </figure>

  <p style="text-align: justify;">
    <strong>Once the binary program (firmware) is successfully loaded, the thermostat is fully operational.</strong>
  </p>

  <p style="text-align: justify;">
    If the WiFi credentials are not stored in the flash memory (e.g., after a fresh flash), the device will start broadcasting its own SSID: <strong>WiFi_TERMOSTAT_AP</strong>.
  </p>

  <p style="text-align: justify;">
    Connect to the WiFi network using a smartphone or computer, and then access the WiFi Manager web interface at <strong>192.168.4.1</strong>. From there, you can configure the WiFi thermostat to connect to your home WiFi network by entering the network name (SSID) and password.
  </p>

  <div class="alert alert-danger">
    <strong>Important:</strong> The WiFi thermostat will only be operational after successfully connecting to your LAN network and receiving an IP address.
  </div>

  <p style="text-align: justify;">
    After connecting to the home WiFi network, the ESP will stop broadcasting the SSID, switch to STA (Station) mode, and operate as a thermostat. The WiFi credentials are stored in the flash memory, so there is no need to enter them again after a restart or power failure.
  </p>

  <p style="text-align: justify;">
    If the network is unavailable, the ESP will begin broadcasting its SSID again as <strong>WiFi_TERMOSTAT_AP</strong>, allowing you to re-enter the credentials. The thermostat can be accessed by its IP address (which is also displayed every 10 seconds on the UART) or via the local mDNS address: <strong>http://WiFi-thermostat.local</strong>. The mDNS service is available only after connecting to a WiFi network.
  </p>

  <p style="text-align: justify;">
    Once the thermostat starts broadcasting its SSID, access via the domain name will no longer be possible.
  </p>

  <p style="text-align: justify;">
    The system operates based on the project’s wiring diagram and logic as described.
  </p>
</section>

<center>
<hr>	
<h4>WiFi thermostat settings (ESP8266 / ESP32) via WiFiManager</h4>	
<hr>	
<img src="https://i.imgur.com/nLqT6Y0.gif" style="display: block; max-width: 100%; height: auto;" alt="WiFi thermostat - ESP8266 / ESP32 - Android - network connection via WiFiManager" title="WiFi thermostat - ESP8266 / ESP32 - Android - network connection via WiFiManager">	
<hr>
<h4>WiFi thermostat - HTTP web server - functional thermostat after connecting to the LAN network</h4>
<hr>		
<div class="alert alert-info">
 	<strong>Refresh the web interface automatically every 30 seconds</strong>
</div>	
<img src="https://i.imgur.com/dBXiDLN.png" style="display: block; max-width: 100%; height: auto;" alt="A working WiFi thermostat at an IP address in the local WiFi network available to clients" title="A working WiFi thermostat at an IP address in the local WiFi network available to clients">
<hr>
<h4>WiFiManager - UART output - system information and logic listing</h4>
<hr>
<div class="alert alert-info">
 	<strong>Output to UART automatically every 10 seconds + temperature measurement on the OneWire bus by the DS18B20 sensor</strong>
</div>	
<img src="https://i.imgur.com/gWm9izE.png" style="display: block; max-width: 100%; height: auto;" alt="ESP - WiFi thermostat - UART statement - system logic - boiler control, assigned IP address in the home LAN" title="ESP - WiFi thermostat - UART statement - system logic - boiler control, assigned IP address in the home LAN">
</center>
	<hr>
	</div>
		</div>
</div>
</body>
</html>
